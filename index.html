<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roblox Script Hub</title>
    <!-- Иконки FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Шрифты Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        /* Стили оставляем без изменений */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #1a1a1a, #2e2e2e);
            color: #fff;
            transition: background 0.5s ease, color 0.5s ease;
            position: relative;
            overflow: hidden;
        }
        body.светлый-режим {
            background: linear-gradient(135deg, #e0e0e0, #f5f5f5);
            color: #333;
        }
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
            pointer-events: none;
            z-index: -1;
        }
        .контейнер {
            display: flex;
            height: 100vh;
        }
        .главная-секция {
            flex: 4;
            padding: 20px;
            overflow-y: auto;
        }
        .боковая-панель {
            flex: 0.7;
            background: linear-gradient(180deg, #3a3a3a, #2e2e2e);
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.3);
            transition: background 0.5s ease;
        }
        .боковая-панель.светлый-режим {
            background: linear-gradient(180deg, #f0f0f0, #e0e0e0);
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
        }
        .поиск {
            width: 100%;
            padding: 10px;
            margin-bottom: 20px;
            background-color: #444;
            border: none;
            border-radius: 25px;
            color: #fff;
            font-size: 16px;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2);
            transition: background 0.5s ease, color 0.5s ease;
        }
        .поиск.светлый-режим {
            background-color: #ddd;
            color: #333;
        }
        .карточка-скрипта {
            background: #555;
            width: 200px;
            margin: 10px;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.5s ease;
            overflow: hidden;
            display: inline-block;
            vertical-align: top;
            position: relative;
        }
        .карточка-скрипта.светлый-режим {
            background: #eee;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        .карточка-скрипта:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(255, 255, 255, 0.2);
        }
        .аватар-скрипта {
            width: 100%;
            height: 150px;
            object-fit: cover;
            display: block;
        }
        .инфо-скрипта {
            background: #666;
            padding: 10px;
            transition: background 0.5s ease;
        }
        .инфо-скрипта.светлый-режим {
            background: #ddd;
        }
        .инфо-скрипта h3 {
            margin: 0;
            font-size: 16px;
            font-weight: 600;
        }
        .имя-юзера {
            font-size: 14px;
            color: #bbb;
            margin: 5px 0 0;
            transition: color 0.5s ease;
        }
        .имя-юзера.светлый-режим {
            color: #555;
        }
        .сообщение-ключа {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #ff4444;
            color: #fff;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            display: flex;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }
        .сообщение-ключа .иконка-ключа {
            margin-right: 5px;
            color: #ffd700;
        }
        .боковая-панель .аватар {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin-bottom: 20px;
            object-fit: cover;
            border: 3px solid #ff6f61;
            box-shadow: 0 0 10px rgba(255, 111, 97, 0.5);
        }
        .боковая-панель button {
            background: linear-gradient(90deg, #666, #888);
            border: none;
            padding: 12px 25px;
            color: #fff;
            margin: 15px 0;
            cursor: pointer;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 500;
            transition: transform 0.2s, box-shadow 0.3s, background 0.5s ease;
        }
        .боковая-панель button:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255, 255, 255, 0.2);
        }
        .переключатель-темы, .переключатель-языка {
            background: none;
            border: none;
            color: #fff;
            font-size: 24px;
            cursor: pointer;
            margin: 10px 0;
            transition: color 0.5s ease;
        }
        .переключатель-темы.светлый-режим, .переключатель-языка.светлый-режим {
            color: #333;
        }
        .модальное-окно {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            justify-content: center;
            align-items: center;
        }
        .содержимое-модального {
            background: linear-gradient(145deg, #444, #555);
            padding: 25px;
            border-radius: 15px;
            width: 550px;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            transition: background 0.5s ease;
        }
        .содержимое-модального.светлый-режим {
            background: linear-gradient(145deg, #fff, #eee);
        }
        .содержимое-модального h2 {
            margin-top: 0;
            color: #ff6f61;
        }
        .содержимое-модального input, .содержимое-модального textarea {
            width: 100%;
            margin: 10px 0;
            padding: 12px;
            background-color: #666;
            border: none;
            color: #fff;
            border-radius: 10px;
            font-size: 16px;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2);
            transition: background 0.5s ease, color 0.5s ease;
        }
        .содержимое-модального input.светлый-режим, .содержимое-модального textarea.светлый-режим {
            background-color: #ddd;
            color: #333;
        }
        .содержимое-модального textarea {
            height: 200px;
            resize: none;
        }
        .содержимое-модального button {
            background: linear-gradient(90deg, #666, #888);
            border: none;
            padding: 12px 25px;
            color: #fff;
            cursor: pointer;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 500;
            transition: background 0.5s ease;
        }
        .содержимое-модального button:hover {
            background: linear-gradient(90deg, #888, #666);
        }
        .содержимое-модального small {
            display: block;
            color: #bbb;
            font-size: 12px;
            margin-top: -5px;
            margin-bottom: 10px;
            transition: color 0.5s ease;
        }
        .содержимое-модального small.светлый-режим {
            color: #555;
        }
        .контейнер-галочки {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }
        .кастомная-галочка {
            display: none;
        }
        .метка-галочки {
            width: 20px;
            height: 20px;
            border: 2px solid #fff;
            border-radius: 4px;
            display: inline-block;
            position: relative;
            cursor: pointer;
            transition: background 0.3s ease, border 0.3s ease;
        }
        .метка-галочки.светлый-режим {
            border: 2px solid #333;
        }
        .кастомная-галочка:checked + .метка-галочки {
            background: #28a745;
            border: 2px solid #28a745;
        }
        .метка-галочки::after {
            content: '\f00c';
            font-family: 'Font Awesome 5 Free';
            font-weight: 900;
            color: #fff;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 12px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .кастомная-галочка:checked + .метка-галочки::after {
            opacity: 1;
        }
        .текст-галочки {
            margin-left: 10px;
            font-size: 16px;
        }
        .уведомление {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(145deg, #666, #888);
            padding: 20px;
            border-radius: 15px;
            color: #fff;
            font-size: 18px;
            font-weight: 500;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }
        .полноэкранное-окно {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        .полноэкранное-окно.открыто {
            display: flex;
            opacity: 1;
        }
        .содержимое-полноэкранного {
            background: linear-gradient(145deg, #444, #555);
            padding: 30px;
            border-radius: 15px;
            width: 80%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            transform: scale(0);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        .содержимое-полноэкранного.светлый-режим {
            background: linear-gradient(145deg, #fff, #eee);
        }
        .содержимое-полноэкранного.открыто {
            transform: scale(1);
            opacity: 1;
        }
        .крестик {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 24px;
            color: #fff;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        .крестик:hover {
            color: #ff6f61;
        }
        .крестик.светлый-режим {
            color: #333;
        }
        .крестик.светлый-режим:hover {
            color: #ff6f61;
        }
        .полноэкранное-окно .аватар-скрипта {
            width: 150px;
            height: 150px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .полноэкранное-окно h3 {
            margin: 0;
            font-size: 24px;
            font-weight: 600;
            color: #ff6f61;
        }
        .полноэкранное-окно .имя-юзера {
            font-size: 18px;
            color: #bbb;
            margin: 10px 0;
        }
        .полноэкранное-окно .имя-юзера.светлый-режим {
            color: #555;
        }
        .полноэкранное-окно p {
            margin: 10px 0;
            font-size: 16px;
        }
        .полноэкранное-окно pre {
            background: #333;
            padding: 15px;
            border-radius: 10px;
            overflow-y: auto;
            max-height: 200px;
            white-space: pre-wrap;
            transition: background 0.5s ease;
        }
        .полноэкранное-окно pre.светлый-режим {
            background: #ddd;
        }
        .кнопка-скопировать {
            background: linear-gradient(90deg, #666, #888);
            border: none;
            padding: 10px 20px;
            color: #fff;
            cursor: pointer;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 500;
            margin-top: 10px;
            margin-right: 10px;
            transition: background 0.5s ease;
        }
        .кнопка-скопировать:hover {
            background: linear-gradient(90deg, #888, #666);
        }
        .сообщение-ключа-полноэкранное {
            background: #ff4444;
            color: #fff;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 14px;
            display: inline-flex;
            align-items: center;
            margin-top: 10px;
        }
        .сообщение-ключа-полноэкранное .иконка-ключа {
            margin-right: 5px;
            color: #ffd700;
        }
    </style>
</head>
<body>
    <div class="контейнер">
        <!-- Главная секция для скриптов -->
        <div class="главная-секция" id="списокСкриптов">
            <input type="text" class="поиск" id="полеПоиска" data-ru-placeholder="Поиск по названию..." data-en-placeholder="Search by script name..." onkeyup="поискСкриптов()">
        </div>

        <!-- Боковая панель -->
        <div class="боковая-панель">
            <img src="images/Avatar.png" class="аватар" alt="Аватар пользователя">
            <button onclick="открытьМодальное()"><i class="fas fa-upload иконка"></i> <span data-ru="Отправить свою работу" data-en="Submit your work"></span></button>
            <button onclick="показатьУведомление()"><i class="fas fa-key иконка"></i> <span data-ru="Получить ключ" data-en="Get key"></span></button>
            <button class="переключатель-темы" onclick="переключитьТему()"><i class="fas fa-moon"></i></button>
            <button class="переключатель-языка" onclick="переключитьЯзык()"><i class="fas fa-globe"></i></button>
        </div>
    </div>

    <!-- Модальное окно для отправки скрипта -->
    <div class="модальное-окно" id="модальноеОтправки">
        <div class="содержимое-модального">
            <h2 data-ru="Отправить свой скрипт" data-en="Submit Your Script"></h2>
            <input type="file" id="вводАватара" accept="image/*" required>
            <small data-ru="Загрузите изображение, которое будет отображаться как аватарка вашего скрипта" data-en="Upload an image to be displayed as your script's avatar"></small>
            <input type="text" id="названиеСкрипта" data-ru-placeholder="Название скрипта" data-en-placeholder="Script Name" maxlength="25" required>
            <small data-ru="Укажите название вашего скрипта (до 25 символов), например, 'Скрипт для автокликера'" data-en="Enter your script's name (up to 25 characters), e.g., 'Autoclicker Script'"></small>
            <textarea id="описаниеСкрипта" data-ru-placeholder="Описание" data-en-placeholder="Description" required></textarea>
            <small data-ru="Опишите, что делает ваш скрипт, например, 'Автоматизирует клики в игре'" data-en="Describe what your script does, e.g., 'Automates clicks in the game'"></small>
            <textarea id="кодСкрипта" data-ru-placeholder="Ваш код (максимум 8000 строк)" data-en-placeholder="Your Code (Max 8000 lines)" required oninput="проверитьДлинуКода()"></textarea>
            <small data-ru="Вставьте код вашего скрипта (максимум 8000 строк)" data-en="Insert your script's code (max 8000 lines)"></small>
            <p id="счётчикСтрок">Строк: 0</p>
            <input type="text" id="цельСкрипта" data-ru-placeholder="На что код, что делает или на какую игру" data-en-placeholder="What the code is for, what it does, or for which game" required>
            <small data-ru="Укажите, для чего ваш код, например, 'Для Roblox, автоматизация фарма'" data-en="Specify what your code is for, e.g., 'For Roblox, farming automation'"></small>
            <input type="text" id="имяПользователя" data-ru-placeholder="Ваше имя (нельзя изменить позже)" data-en-placeholder="Your Name (Cannot be changed later)" required>
            <small data-ru="Укажите ваше имя, которое будет отображаться как автор скрипта" data-en="Enter your name, which will be displayed as the script's author"></small>
            <div class="контейнер-галочки">
                <input type="checkbox" id="естьКлюч" class="кастомная-галочка">
                <label for="естьКлюч" class="метка-галочки"></label>
                <span class="текст-галочки" data-ru="Нет ключа" data-en="No key"></span>
            </div>
            <button onclick="отправитьСкрипт()"><span data-ru="Отправить" data-en="Submit"></span></button>
        </div>
    </div>

    <!-- Уведомление для ключа -->
    <div class="уведомление" id="уведомление">
        <span data-ru="Функция закрыта, в разработке." data-en="Function is closed, in development."></span>
    </div>

    <!-- Полноэкранное окно для деталей скрипта -->
    <div class="полноэкранное-окно" id="полноэкранноеОкно">
        <div class="содержимое-полноэкранного" id="содержимоеПолноэкранного">
            <i class="fas fa-times крестик" onclick="закрытьПолноэкранное()"></i>
            <img id="полноэкранныйАватар" class="аватар-скрипта" alt="Аватар скрипта">
            <h3 id="полноэкранноеНазвание"></h3>
            <div class="имя-юзера" id="полноэкранноеИмя"></div>
            <p id="полноэкранноеОписание"></p>
            <p id="полноэкраннаяЦель"></p>
            <pre id="полноэкранныйКод"></pre>
            <button class="кнопка-скопировать" onclick="скопироватьКод()"><span data-ru="Скопировать" data-en="Copy"></span></button>
            <div class="сообщение-ключа-полноэкранное" id="полноэкранныйСтатусКлюча"></div>
        </div>
    </div>

    <script>
        const REPO_OWNER = 'kirill835346'; // Твой username
        const REPO_NAME = 'ihpdfgbdnjfg'; // Название репозитория
        const SCRIPTS_PATH = 'scripts.json'; // Путь к файлу scripts.json
        const IMAGES_PATH = 'images'; // Папка для изображений
        const DISPATCH_TOKEN = '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'; // Вставь новый токен сюда

        let scripts = [];
        let имяПользователя = localStorage.getItem('имяПользователя') || null;
        let текущийЯзык = 'ru';

        // Загрузка скриптов из GitHub
        async function загрузитьСкрипты() {
            try {
                const response = await fetch(`https://raw.githubusercontent.com/${REPO_OWNER}/${REPO_NAME}/main/${SCRIPTS_PATH}`);
                scripts = await response.json();

                const списокСкриптов = document.getElementById('списокСкриптов');
                списокСкриптов.innerHTML = '<input type="text" class="поиск" id="полеПоиска" data-ru-placeholder="Поиск по названию..." data-en-placeholder="Search by script name..." onkeyup="поискСкриптов()">';
                scripts.forEach((скрипт, индекс) => {
                    const карточка = document.createElement('div');
                    карточка.className = 'карточка-скрипта';
                    карточка.dataset.index = индекс;
                    карточка.onclick = function() { открытьПолноэкранное(скрипт, индекс); };
                    карточка.innerHTML = `
                        <img src="${скрипт.аватар}" class="аватар-скрипта" alt="Аватар скрипта">
                        <div class="инфо-скрипта">
                            <h3>${скрипт.название}</h3>
                            <div class="имя-юзера">${скрипт.пользователь}</div>
                        </div>
                        ${скрипт.естьКлюч ? '<div class="сообщение-ключа"><i class="fas fa-key иконка-ключа"></i>' + (текущийЯзык === 'ru' ? 'Ключ доступа' : 'Access Key') + '</div>' : ''}
                    `;
                    списокСкриптов.appendChild(карточка);
                });
                обновитьЯзык();
            } catch (err) {
                console.error('Ошибка загрузки скриптов:', err);
                alert(текущийЯзык === 'ru' ? 'Не удалось загрузить скрипты.' : 'Failed to load scripts.');
            }
        }

        // Открыть модальное окно
        function открытьМодальное() {
            const модальное = document.getElementById('модальноеОтправки');
            модальное.style.display = 'flex';
            if (имяПользователя) {
                document.getElementById('имяПользователя').value = имяПользователя;
                document.getElementById('имяПользователя').disabled = true;
            }
            обновитьЯзык();
        }

        // Проверить длину кода
        function проверитьДлинуКода() {
            const код = document.getElementById('кодСкрипта').value;
            const строк = код.split('\n').length;
            document.getElementById('счётчикСтрок').textContent = текущийЯзык === 'ru' ? `Строк: ${строк}` : `Lines: ${строк}`;
            if (строк > 8000) {
                alert(текущийЯзык === 'ru' ? 'Код превышает 8000 строк! Уменьшите длину.' : 'Code exceeds 8000 lines! Please reduce the length.');
                document.getElementById('кодСкрипта').value = код.split('\n').slice(0, 8000).join('\n');
            }
        }

        // Очистить форму после отправки
        function очиститьФорму() {
            document.getElementById('вводАватара').value = '';
            document.getElementById('названиеСкрипта').value = '';
            document.getElementById('описаниеСкрипта').value = '';
            document.getElementById('кодСкрипта').value = '';
            document.getElementById('цельСкрипта').value = '';
            document.getElementById('имяПользователя').value = имяПользователя || '';
            document.getElementById('естьКлюч').checked = false;
            document.querySelector('.текст-галочки').textContent = текущийЯзык === 'ru' ? 'Нет ключа' : 'No key';
            document.getElementById('счётчикСтрок').textContent = текущийЯзык === 'ru' ? 'Строк: 0' : 'Lines: 0';
        }

        // Отправить скрипт через repository_dispatch
        async function отправитьСкрипт() {
            const аватар = document.getElementById('вводАватара').files[0];
            const название = document.getElementById('названиеСкрипта').value;
            const описание = document.getElementById('описаниеСкрипта').value;
            const код = document.getElementById('кодСкрипта').value;
            const цель = document.getElementById('цельСкрипта').value;
            const имя = document.getElementById('имяПользователя').value;
            const естьКлюч = document.getElementById('естьКлюч').checked;

            if (!аватар || !название || !описание || !код || !цель || !имя) {
                alert(текущийЯзык === 'ru' ? 'Заполните все поля!' : 'Please fill all fields!');
                return;
            }

            if (!имяПользователя) {
                имяПользователя = имя;
                localStorage.setItem('имяПользователя', имяПользователя);
            }

            try {
                // Читаем аватар как base64
                const reader = new FileReader();
                reader.onload = async function() {
                    const base64Image = reader.result.split(',')[1];
                    const avatarFilename = `${Date.now()}_avatar.jpg`;
                    const avatarUrl = `https://raw.githubusercontent.com/${REPO_OWNER}/${REPO_NAME}/main/${IMAGES_PATH}/${avatarFilename}`;

                    // Формируем данные скрипта
                    const newScript = {
                        id: Date.now().toString(),
                        аватар: avatarUrl,
                        название: название,
                        описание: описание,
                        код: код,
                        цель: цель,
                        пользователь: имя,
                        естьКлюч: естьКлюч,
                        avatar: base64Image // Передаём аватар как base64
                    };

                    // Отправляем событие repository_dispatch
                    const response = await fetch(`https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/dispatches`, {
                        method: 'POST',
                        headers: {
                            'Authorization': `token ${DISPATCH_TOKEN}`,
                            'Accept': 'application/vnd.github.v3+json'
                        },
                        body: JSON.stringify({
                            event_type: 'update-scripts',
                            client_payload: {
                                script: JSON.stringify(newScript)
                            }
                        })
                    });

                    if (response.ok) {
                        alert(текущийЯзык === 'ru' ? 'Скрипт отправлен! Обновите страницу через несколько секунд.' : 'Script submitted! Refresh the page in a few seconds.');
                        очиститьФорму();
                        document.getElementById('модальноеОтправки').style.display = 'none';
                        // Автоматическое обновление через 5 секунд
                        setTimeout(() => {
                            загрузитьСкрипты();
                        }, 5000);
                    } else {
                        throw new Error('Ошибка отправки события');
                    }
                };
                reader.readAsDataURL(аватар);
            } catch (error) {
                console.error('Ошибка отправки скрипта:', error);
                alert(текущийЯзык === 'ru' ? 'Не удалось отправить скрипт.' : 'Failed to submit script.');
            }
        }

        // Открыть полноэкранное окно
        function открытьПолноэкранное(скрипт, индекс) {
            const окно = document.getElementById('полноэкранноеОкно');
            const содержимое = document.getElementById('содержимоеПолноэкранного');
            document.getElementById('полноэкранныйАватар').src = скрипт.аватар;
            document.getElementById('полноэкранноеНазвание').textContent = скрипт.название;
            document.getElementById('полноэкранноеИмя').textContent = скрипт.пользователь;
            document.getElementById('полноэкранноеОписание').textContent = `${текущийЯзык === 'ru' ? 'Описание:' : 'Description:'} ${скрипт.описание}`;
            document.getElementById('полноэкраннаяЦель').textContent = `${текущийЯзык === 'ru' ? 'На что код:' : 'What the code is for:'} ${скрипт.цель}`;
            document.getElementById('полноэкранныйКод').textContent = скрипт.код;
            const статусКлюча = document.getElementById('полноэкранныйСтатусКлюча');
            if (скрипт.естьКлюч) {
                статусКлюча.innerHTML = `
                    <i class="fas fa-key иконка-ключа"></i>
                    ${текущийЯзык === 'ru' ? 'Ключ доступа' : 'Access Key'}
                `;
            } else {
                статусКлюча.innerHTML = '';
            }
            if (document.body.classList.contains('светлый-режим')) {
                содержимое.classList.add('светлый-режим');
                document.getElementById('полноэкранноеИмя').classList.add('светлый-режим');
                document.getElementById('полноэкранныйКод').classList.add('светлый-режим');
                document.querySelector('.крестик').classList.add('светлый-режим');
            }
            окно.classList.add('открыто');
            содержимое.classList.add('открыто');
        }

        // Закрыть полноэкранное окно
        function закрытьПолноэкранное() {
            const окно = document.getElementById('полноэкранноеОкно');
            const содержимое = document.getElementById('содержимоеПолноэкранного');
            окно.classList.remove('открыто');
            содержимое.classList.remove('открыто');
        }

        // Скопировать код
        function скопироватьКод() {
            const код = document.getElementById('полноэкранныйКод').textContent;
            navigator.clipboard.writeText(код).then(() => {
                alert(текущийЯзык === 'ru' ? 'Код скопирован!' : 'Code copied!');
            }).catch(err => {
                console.error('Ошибка копирования:', err);
                alert(текущийЯзык === 'ru' ? 'Не удалось скопировать код.' : 'Failed to copy code.');
            });
        }

        // Поиск скриптов по названию
        function поискСкриптов() {
            const запрос = document.getElementById('полеПоиска').value.toLowerCase();
            const карточки = document.querySelectorAll('.карточка-скрипта');
            карточки.forEach(карточка => {
                const название = карточка.querySelector('h3').textContent.toLowerCase();
                карточка.style.display = название.includes(запрос) ? 'block' : 'none';
            });
        }

        // Показать уведомление
        function показатьУведомление() {
            const уведомление = document.getElementById('уведомление');
            уведомление.style.display = 'block';
            setTimeout(() => {
                уведомление.style.display = 'none';
            }, 3000);
        }

        // Переключить тему
        function переключитьТему() {
            const тело = document.body;
            const переключатель = document.querySelector('.переключатель-темы');
            тело.classList.toggle('светлый-режим');
            document.querySelector('.боковая-панель').classList.toggle('светлый-режим');
            document.querySelector('.поиск').classList.toggle('светлый-режим');
            document.querySelectorAll('.карточка-скрипта').forEach(карточка => карточка.classList.toggle('светлый-режим'));
            document.querySelectorAll('.инфо-скрипта').forEach(инфо => инфо.classList.toggle('светлый-режим'));
            document.querySelectorAll('.имя-юзера').forEach(имя => имя.classList.toggle('светлый-режим'));
            if (document.getElementById('модальноеОтправки').style.display === 'flex') {
                document.querySelector('.содержимое-модального').classList.toggle('светлый-режим');
                document.querySelectorAll('.содержимое-модального input, .содержимое-модального textarea').forEach(поле => поле.classList.toggle('светлый-режим'));
                document.querySelectorAll('.содержимое-модального small').forEach(подсказка => подсказка.classList.toggle('светлый-режим'));
                document.querySelector('.метка-галочки').classList.toggle('светлый-режим');
            }
            if (document.getElementById('полноэкранноеОкно').classList.contains('открыто')) {
                document.getElementById('содержимоеПолноэкранного').classList.toggle('светлый-режим');
                document.getElementById('полноэкранноеИмя').classList.toggle('светлый-режим');
                document.getElementById('полноэкранныйКод').classList.toggle('светлый-режим');
                document.querySelector('.крестик').classList.toggle('светлый-режим');
            }
            переключатель.innerHTML = тело.classList.contains('светлый-режим') ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
        }

        // Определение языка по IP
        async function определитьЯзыкПоIP() {
            try {
                const response = await fetch('https://ipapi.co/json/');
                const data = await response.json();
                const страна = data.country_code;
                текущийЯзык = (страна === 'RU' || страна === 'UA' || страна === 'BY') ? 'ru' : 'en';
                обновитьЯзык();
            } catch (error) {
                console.error('Ошибка определения языка по IP:', error);
                текущийЯзык = 'ru';
                обновитьЯзык();
            }
        }

        // Переключить язык вручную
        function переключитьЯзык() {
            текущийЯзык = текущийЯзык === 'ru' ? 'en' : 'ru';
            обновитьЯзык();
        }

        // Обновить текст на странице в зависимости от языка
        function обновитьЯзык() {
            document.querySelectorAll('[data-ru]').forEach(element => {
                const ключ = текущийЯзык === 'ru' ? 'data-ru' : 'data-en';
                if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                    element.placeholder = element.getAttribute(ключ);
                } else {
                    element.textContent = element.getAttribute(ключ);
                }
            });
        }

        // Обновление текста галочки
        document.getElementById('естьКлюч').addEventListener('change', function() {
            const текстГалочки = document.querySelector('.текст-галочки');
            текстГалочки.textContent = this.checked ? (текущийЯзык === 'ru' ? 'Есть ключ' : 'Has key') : (текущийЯзык === 'ru' ? 'Нет ключа' : 'No key');
        });

        // Загрузка скриптов при старте
        window.onload = function() {
            определитьЯзыкПоIP();
            загрузитьСкрипты();
        };
    </script>
</body>
</html>
